- job-template:
    builders:
    - shell: JENKINS_BUILD_STARTED=true bash <(curl -fsS --retry 3 "https://raw.githubusercontent.com/kubernetes/kubernetes/master/hack/jenkins/upload-to-gcs.sh")
    - shell: |
        {job-env}
        timeout -k {kill-timeout}m {timeout}m ./hack/jenkins/build.sh && rc=$? || rc=$?
        {report-rc}
    description: 'Grab the latest from GitHub, build. Test owner: Build Cop.'
    name: kubernetes-{build}
    node: build
    properties:
    - build-discarder:
        num-to-keep: 200
    publishers:
    - claim-build
    - log-parser
    - email-ext:
        fail: true
        fixed: true
        presend-script: $DEFAULT_PRESEND_SCRIPT
        send-to:
        - culprits
    - gcs-uploader
    scm:
    - git:
        branches:
        - '{branch}'
        browser: githubweb
        browser-url: https://github.com/kubernetes/kubernetes
        skip-tag: true
        url: https://github.com/kubernetes/kubernetes
        wipe-workspace: false
    triggers:
    - pollscm:
        cron: H/2 * * * *
    wrappers:
    - timeout:
        fail: true
        timeout: '{jenkins-timeout}'
    - timestamps
    - workspace-cleanup:
        dirmatch: true
        external-deletion-command: sudo rm -rf %s
- project:
    build:
    - build:
        branch: master
        job-env: ""
        timeout: 50
    - build-1.0:
        branch: release-1.0
        job-env: ""
        timeout: 30
    - build-1.1:
        branch: release-1.1
        job-env: ""
        timeout: 30
    - build-1.2:
        branch: release-1.2
        job-env: ""
        timeout: 30
    - build-1.3:
        branch: release-1.3
        job-env: ""
        timeout: 50
    - federation-build:
        branch: master
        job-env: |
          export PROJECT="k8s-jkns-e2e-gce-federation"
          export FEDERATION=true
          export FEDERATION_PUSH_REPO_BASE="gcr.io/k8s-jkns-e2e-gce-federation"
          export KUBE_FASTBUILD=true
          export KUBE_GCS_RELEASE_BUCKET=kubernetes-federation-release
        timeout: 50
    jobs:
    - kubernetes-{build}
    name: kubernetes-builds


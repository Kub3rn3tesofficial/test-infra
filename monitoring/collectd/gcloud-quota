# Copyright 2016 The Kubernetes Authors All rights reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# collectd config to collect Google Compute quota usage and limits and report
# them to Stackdriver.
#
# Paths have been hard-coded for Google's Jenkins setup, but they can
# be adjusted as necessary.
#
# To enable:
# 1. Copy gcloud-quota.sh into /opt/stackdriver/collectd/exec and chmod 755 the
#    script
# 2. Copy this config into /opt/stackdriver/collectd/etc/collectd.d
# 3. Restart the stackdriver agent
#
# Metrics will appear in Stackdriver associated with the GCE instance where
# this is installed.
#
# Metric names follow the naming pattern
# "gcloud_quota:{PROJECT}:gauge:{METRIC}:value".

LoadPlugin exec
<Plugin exec>
  Exec "jenkins:jenkins" "/opt/stackdriver/collectd/exec/gcloud-quota.sh"
</Plugin>

presubmits:
  kubernetes/k8s.io:
  - name: pull-k8sio-groups-test
    annotations:
      testgrid-create-test-group: 'true'
      testgrid-dashboards: wg-k8s-infra-k8sio
    decorate: true
    path_alias: k8s.io/k8s.io
    run_if_changed: "^groups/"
    branches:
    - ^main$
    spec:
      containers:
      - image: golang:1.13
        command:
        - bash
        args:
        - -c
        - "cd groups && go test"
        env:
        - name: GO111MODULE
          value: "on"
  - name: pull-k8sio-verify
    annotations:
      testgrid-dashboards: wg-k8s-infra-k8sio
      testgrid-tab-name: pull-k8sio-verify
    always_run: true
    decorate: true
    spec:
      containers:
      - image: gcr.io/k8s-testimages/kubekins-e2e:v20210403-e49d2c6-master
        command:
        - runner.sh
        args:
        - ./hack/verify.sh
  - name: k8sio-k8s-resources-verify
    annotations:
      testgrid-dashboards: wg-k8s-infra-k8sio
      testgrid-num-failures-to-alert: '1'
      testgrid-alert-email: ameukam@gmail.com
      testgrid-tab-name: k8sio-k8s-resources-verify
    decorate: true
    path_alias: k8s.io/k8s.io
    run_if_changed: '\.yaml$'
    spec:
      containers:
      - image: openpolicyagent/conftest:latest
        args:
        - test
        - -p policies/ */*.yaml

deck:
  rerun_auth_configs:
    '*':
      allow_anyone: true

sinker:
  resync_period: 5s
  max_prowjob_age: 48h
  max_pod_age: 48h
  terminated_pod_ttl: 30m

horologium:
  tick_interval: 1s

prowjob_namespace: default
pod_namespace: test-pods
log_level: debug

prowjob_default_entries:
  - cluster: '*'
    repo: 'testRepo'
    config:
      tenant_id: 'tester'

gerrit:
  tick_interval: 1s
  org_repos_config:
  - org: http://fakegerritserver
    repos:
    - gerrit-test-infra-0
    - gerrit-test-infra-1
    - gerrit-test-infra-2

plank:
  default_decoration_config_entries:
  - config:
      timeout: 2h
      grace_period: 15s
      utility_images:
        clonerefs: localhost:5001/clonerefs-ssl-disabled:latest
        # By default, use the version of initupload that has
        # STORAGE_EMULATOR_HOST set to fakegcsserver.
        initupload: localhost:5001/initupload-fakegcsserver:latest
        entrypoint: localhost:5001/entrypoint:latest
        sidecar: localhost:5001/sidecar:latest
      gcs_configuration:
        bucket: "bucket-foo"
        path_strategy: "legacy"
        default_org: "org-foo"
        default_repo: "repo-foo"

# fakepubsub will read this config and create all necessary subscriptions.
pubsub_subscriptions:
  "project1":
  - "subscription1" # Subscribed to "topic1".

in_repo_config:
  enabled:
   "org1/repo1": true
   "fakegitserver.default/repo/repo2": true
   "fakegitserver.default/repo/repo3": true
   "fakegitserver.default/repo/org1/repo4": true
   "fakegitserver.default/repo/org1/repo5": true
   "fakegitserver.default/repo/some/org/gangway-test-repo-1": true

# FIXME: (later) add this block to enforce some basic security guarantees
# allowed_job_invokers:
#
#   # Identify the cloud provider associated with a client. "GCP_PROJECT" means a GCP Project.
# - client_type: "GCP_PROJECT"
#   # In this case this is the GCP Project ID number.
#   client_id: "1000"
#   # Human-readable name for this client; used in debug logs to help make logs
#   # easier to read for humans. It is only used for logging and is not used for
#   # actual business logic.
#   client_name: "wbc-well-behaved-consumer"
#   allowed_job_categories:
#   # All jobs for "wbc" in a fake Git-on-Borg URL. This org will have a
#   # "foo-repo", at the full URL
#   # "http://fakegitserver.default/repo/wbc/foo-repo". The leading "/repo" is
#   # where fakegitserver serves all Git repositories.
#   - org: "http://fakegitserver.default/repo/wbc"
#     repo: "*"
#   # Also, allow all jobs tied to a particular build cluster.
#   - build_cluster: wbc-cluster
# - client_type: "GCP_PROJECT"
#   client_id: "2000"
#   client_name: "nc-normal-consumer"
#   allowed_job_categories:
#   - build_cluster: nc-cluster
